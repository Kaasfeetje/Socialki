(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},72:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a(1),c=a(18),r=a.n(c),o=a(5),i=(a(50),a(10)),u=a(13),l=Object(u.a)(),p=a(3),d=a(11);a(51),a(52);var j=function(e){var t=e.opened,a=e.content,c=e.onDismiss,o=Object(n.useState)(t||!1),i=Object(p.a)(o,2),u=i[0],l=i[1],d=Object(n.useRef)();return Object(n.useEffect)((function(){l(t)}),[t]),r.a.createPortal(Object(s.jsx)("div",{onClick:c,className:"modal--container ".concat(u&&"show"),children:Object(s.jsx)("div",{onClick:function(e){return e.stopPropagation()},ref:d,className:"modal ",children:a})}),document.querySelector("#modal"))},b=a(4),f=a.n(b),O=a(7),m=a(6),h=a.n(m);var v=function(e){var t=e.text,a=e.icon,c=e.type,r=Object(n.useState)(!0),o=Object(p.a)(r,2),i=o[0],u=o[1];return Object(n.useEffect)((function(){var e=setTimeout((function(){u(!1)}),3e3);return function(){clearTimeout(e)}}),[]),Object(s.jsxs)("div",{className:"message ".concat(i&&"show"," ").concat(c&&"danger"),children:[Object(s.jsx)("span",{children:t}),a&&Object(s.jsx)("i",{className:a}),Object(s.jsx)("button",{type:"button",onClick:function(){return u(!1)},children:"X"})]})};var x=function(e){var t=e.size,a=e.color,c=Object(n.useRef)();return Object(n.useEffect)((function(){c.current&&(t&&c.current.style.setProperty("--spinner-width",t),a&&c.current.style.setProperty("--spinner-color",a))}),[c,t,a]),Object(s.jsxs)("div",{ref:c,className:"lds-roller",children:[Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{})]})},g="FETCH_FEED_REQUEST",y="FETCH_FEED_SUCCESS",E="FETCH_FEED_FAIL",S="FETCH_FEED_RESET",w="FETCH_EXPLORE_REQUEST",N="FETCH_EXPLORE_SUCCESS",_="FETCH_EXPLORE_FAIL",k="FETCH_EXPLORE_RESET",C="FETCH_PROFILE_REQUEST",T="FETCH_PROFILE_SUCCESS",P="FETCH_PROFILE_FAIL",I="USER_SIGNIN_REQUEST",F="USER_SIGNIN_SUCCESS",R="USER_SIGNIN_FAIL",U="USER_SIGNUP_REQUEST",L="USER_SIGNUP_SUCCESS",A="USER_SIGNUP_FAIL",H="USER_SIGNOUT_REQUEST",M="USER_SIGNOUT_SUCCESS",D="USER_SIGNOUT_FAIL",Q="USER_FETCH_ME_REQUEST",G="USER_FETCH_ME_SUCCESS",z="USER_FETCH_ME_FAIL",K="USER_FETCH_POSTS_REQUEST",X="USER_FETCH_POSTS_SUCCESS",B="USER_FETCH_POSTS_FAIL",$="USER_FETCH_POSTS_RESET",W="USER_PROFILE_UPDATE_REQUEST",Z="USER_PROFILE_UPDATE_SUCCESS",J="USER_PROFILE_UPDATE_FAIL",q="USER_PROFILE_UPDATE_RESET",V="POST_CREATE_REQUEST",Y="POST_CREATE_SUCCESS",ee="POST_CREATE_FAIL",te="POST_CREATE_RESET",ae="POST_FETCH_REQUEST",se="POST_FETCH_SUCCESS",ne="POST_FETCH_FAIL",ce="POST_LIKE_SUCCESS",re="POST_COMMENT_LIKE_SUCCESS",oe="SEARCH_REQUEST",ie="SEARCH_SUCCESS",ue="SEARCH_FAIL",le="SEARCH_RESET",pe="POST_FETCH_COMMENT_REQUEST",de="POST_FETCH_COMMENT_SUCCESS",je="POST_FETCH_COMMENT_FAIL",be="POST_COMMENT_RESET",fe="NOTIFICATION_FETCH_REQUEST",Oe="NOTIFICATION_FETCH_SUCCESS",me="NOTIFICATION_FETCH_FAIL",he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return function(){var t=Object(O.a)(f.a.mark((function t(a){var s,n,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a({type:g}),void 0!==e){t.next=9;break}return t.next=5,h.a.get("/api/v1/posts/feed");case 5:n=t.sent,s=n.data,t.next=13;break;case 9:return t.next=11,h.a.get("/api/v1/posts/feed?lastPost=".concat(e));case 11:c=t.sent,s=c.data;case 13:a({type:y,payload:s}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),a({type:E,payload:t.t0.response&&t.t0.response.data.errors?t.t0.response.data.errors:[{message:t.t0.message}]});case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e){return t.apply(this,arguments)}}()},ve=function(e){return function(){var t=Object(O.a)(f.a.mark((function t(a){var s,n,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a({type:w}),void 0!==e){t.next=9;break}return t.next=5,h.a.get("/api/v1/posts");case 5:n=t.sent,s=n.data,t.next=13;break;case 9:return t.next=11,h.a.get("/api/v1/posts?lastPost=".concat(e));case 11:c=t.sent,s=c.data;case 13:a({type:N,payload:s}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),a({type:_,payload:t.t0.response&&t.t0.response.data.errors?t.t0.response.data.errors:[{message:t.t0.message}]});case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e){return t.apply(this,arguments)}}()},xe=function(e,t){return function(){var a=Object(O.a)(f.a.mark((function a(s){var n,c,r,o;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t){a.next=2;break}return a.abrupt("return");case 2:if(console.log("test",t),a.prev=3,s({type:K}),n={headers:{"content-type":"application/json"}},void 0!==e){a.next=13;break}return a.next=9,h.a.get("/api/v1/posts/users/".concat(t),n);case 9:r=a.sent,c=r.data,a.next=17;break;case 13:return a.next=15,h.a.get("/api/v1/posts/users/".concat(t,"?lastPost=").concat(e),n);case 15:o=a.sent,c=o.data;case 17:s({type:X,payload:c}),a.next=23;break;case 20:a.prev=20,a.t0=a.catch(3),s({type:B,payload:a.t0.response&&a.t0.response.data.errors?a.t0.response.data.errors:[{message:a.t0.message}]});case 23:case"end":return a.stop()}}),a,null,[[3,20]])})));return function(e){return a.apply(this,arguments)}}()},ge=function(e,t,a,s){return function(){var n=Object(O.a)(f.a.mark((function n(c){var r,o,i,u;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s){n.next=2;break}return n.abrupt("return");case 2:if(n.prev=2,c({type:oe}),r={headers:{"content-type":"application/json"}},void 0!==t){n.next=12;break}return n.next=8,h.a.post("/api/v1/search",{keyword:e,first:a},r);case 8:i=n.sent,o=i.data,n.next=16;break;case 12:return n.next=14,h.a.post("/api/v1/search?lastPost=".concat(t),{keyword:e,first:a},r);case 14:u=n.sent,o=u.data;case 16:c({type:ie,payload:o}),n.next=22;break;case 19:n.prev=19,n.t0=n.catch(2),c({type:ue,payload:n.t0.response&&n.t0.response.data.errors?n.t0.response.data.errors:[{message:n.t0.message}]});case 22:case"end":return n.stop()}}),n,null,[[2,19]])})));return function(e){return n.apply(this,arguments)}}()};a(72);var ye=function(e){var t=e.options,a=e.onChangeSelected,c=Object(n.useState)(0),r=Object(p.a)(c,2),o=r[0],i=r[1],u=Object(n.useState)(!1),l=Object(p.a)(u,2),d=l[0],j=l[1],b=Object(n.useRef)(),f=t.map((function(e,n){return Object(s.jsxs)("div",{className:"select--option",onClick:function(e){return function(e){a(t[e].value),i(e),j(!1)}(n)},children:[Object(s.jsx)("i",{className:e.icon}),Object(s.jsx)("span",{children:e.text})]})}));return Object(n.useEffect)((function(){var e=function(e){b.current&&!b.current.contains(e.target)&&(e.stopPropagation(),j(!1))};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[b]),Object(s.jsxs)("div",{ref:b,className:"select ".concat(d?"show":""),children:[Object(s.jsx)("div",{className:"select--preview",onClick:function(e){return j(!d)},children:Object(s.jsx)("i",{className:t[o].icon})}),Object(s.jsx)("div",{className:"select--options ".concat(d?"show":""),children:f})]})};var Ee=function(e){var t=e.onSuccess,a=Object(n.useState)(""),c=Object(p.a)(a,2),r=c[0],i=c[1],u=Object(n.useState)("public"),l=Object(p.a)(u,2),d=l[0],j=l[1],b=Object(n.useState)(""),m=Object(p.a)(b,2),g=m[0],y=m[1],E=Object(n.useState)(!1),S=Object(p.a)(E,2),w=S[0],N=S[1],_=Object(n.useState)(void 0),k=Object(p.a)(_,2),C=k[0],T=k[1],P=Object(o.b)(),I=Object(o.c)((function(e){return e.postCreate})),F=I.error,R=I.success;Object(n.useEffect)((function(){R&&t()}),[R,t]);var U=function(){var e=Object(O.a)(f.a.mark((function e(t){var a,s,n,c,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files[0],(s=new FormData).append("image",a),N(!0),e.prev=4,n={headers:{"content-type":"application/json"}},e.next=8,h.a.post("/api/v1/upload",s,n);case 8:c=e.sent,r=c.data,y(r.data),N(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(4),T(e.t0.response.data.errors),N(!1);case 18:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)("form",{className:"create-socialki",onSubmit:function(e){e.preventDefault(),P(function(e,t,a){return function(){var s=Object(O.a)(f.a.mark((function s(n){var c,r,o;return f.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,n({type:V}),c={headers:{"content-type":"application/json"}},s.next=5,h.a.post("/api/v1/posts",{description:e,image:t,visibility:a},c);case 5:r=s.sent,o=r.data,n({type:Y,payload:o}),s.next=13;break;case 10:s.prev=10,s.t0=s.catch(0),n({type:ee,payload:s.t0.response&&s.t0.response.data.errors?s.t0.response.data.errors:[{message:s.t0.message}]});case 13:case"end":return s.stop()}}),s,null,[[0,10]])})));return function(e){return s.apply(this,arguments)}}()}(r,g,d)),i(""),y(""),j("public")},children:[F&&F.map((function(e){return Object(s.jsx)(v,{type:"danger",text:e.message},e.message)})),C&&C.map((function(e){return Object(s.jsx)(v,{text:e.message,type:"danger"},e.message)})),Object(s.jsx)("h2",{children:"Create Post"}),Object(s.jsxs)("div",{className:"form-item",children:[Object(s.jsx)("i",{className:"fas fa-comment"}),Object(s.jsx)("textarea",{id:"description",onChange:function(e){return i(e.target.value)},value:r,rows:3,placeholder:"Description"})]}),Object(s.jsxs)("div",{className:"create-socialki--actions",children:[Object(s.jsxs)("div",{className:"group",children:[Object(s.jsxs)("div",{className:"create-socialki--actions-image",children:[Object(s.jsx)("label",{htmlFor:"commentImage",children:Object(s.jsx)("i",{className:"fas fa-image"})}),Object(s.jsx)("input",{type:"file",accept:"image/*",id:"commentImage",onChange:U})]}),Object(s.jsx)("div",{className:"create-socialki--actions-visibility",children:Object(s.jsx)(ye,{onChangeSelected:function(e){return j(e)},options:[{value:"public",text:"Public",icon:"fas fa-eye"},{value:"private",text:"Private",icon:"fas fa-eye-slash"},{value:"unlisted",text:"Unlisted",icon:"fas fa-low-vision"}]})})]}),Object(s.jsxs)("button",{type:"submit",children:["Post",w&&Object(s.jsx)(x,{size:"20px"})]})]})]})};var Se=function(e){var t=e.image,a=e.width,n=e.height,c=e.fluid;return Object(s.jsx)("img",{className:"avatar ".concat(c&&"fluid"),src:"/".concat(t),alt:"Profile avatar",width:a,height:n})};var we=function(){var e=Object(o.b)(),t=Object(n.useState)(null),a=Object(p.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)(!1),u=Object(p.a)(i,2),l=u[0],b=u[1],f=Object(o.c)((function(e){return e.user})).userInfo,O=function(){b(!1),e({type:te})};return Object(s.jsxs)("header",{children:[Object(s.jsx)(j,{opened:l,onDismiss:O,content:Object(s.jsx)(Ee,{onSuccess:O})}),Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("div",{children:Object(s.jsx)(d.a,{to:"/",children:Object(s.jsx)("h2",{children:"Socialki"})})}),Object(s.jsx)("nav",{children:f?Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{className:"nav-item",onMouseEnter:function(e){return r(0)},onMouseLeave:function(e){return r(null)},children:Object(s.jsxs)(d.a,{to:"/",children:[Object(s.jsx)("i",{className:"fas fa-home"}),Object(s.jsx)("div",{className:"".concat(0===c?"show":""),children:"Home"})]})}),Object(s.jsx)("li",{className:"nav-item",onMouseEnter:function(e){return r(1)},onMouseLeave:function(e){return r(null)},children:Object(s.jsxs)("button",{onClick:function(e){return b(!0)},children:[Object(s.jsx)("i",{className:"fas fa-plus-circle"}),Object(s.jsx)("div",{className:"".concat(1===c?"show":""),children:"New Post"})]})}),Object(s.jsx)("li",{className:"nav-item",onMouseEnter:function(e){return r(2)},onMouseLeave:function(e){return r(null)},children:Object(s.jsxs)(d.a,{to:"/explore",children:[Object(s.jsx)("i",{className:"fas fa-search"}),Object(s.jsx)("div",{className:"".concat(2===c?"show":""),children:"Explore"})]})}),Object(s.jsx)("li",{className:"nav-item profileImage",onMouseEnter:function(e){return r(3)},onMouseLeave:function(e){return r(null)},children:Object(s.jsxs)(d.a,{to:"/profile",children:[Object(s.jsx)(Se,{image:f.profileImage,width:"50px",height:"50px"}),Object(s.jsx)("div",{className:"".concat(3===c?"show":""),children:"Profile"})]})})]}):Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{className:"nav-item",children:Object(s.jsx)(d.a,{to:"/login",className:"btn",children:"Login"})}),Object(s.jsx)("li",{className:"nav-item",children:Object(s.jsx)(d.a,{to:"/signup",className:"btn btn-secondary",children:"Signup"})})]})})]})]})};a(74);var Ne=function(e){var t=e.text,a=Object(n.useState)([]),c=Object(p.a)(a,2),r=c[0],o=c[1];return Object(n.useEffect)((function(){!function(){var e=/^@\w+$/,a=/^#\w+$/,n=t.replace(/(\r\n|\n|\r)/gm," ").split(" "),c=n.filter((function(t){return e.test(t.toLowerCase())})),r=n.filter((function(e){return a.test(e.toLowerCase())}));n.forEach((function(e,t){r&&r.includes(e)?n[t]=Object(s.jsx)(d.a,{to:"/search/".concat(e),children:e+" "},t):c&&c.includes(e)?n[t]=Object(s.jsx)(d.a,{to:"/profile/".concat(e.replace("@","")),children:e},t):/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/.test(e)?n[t]=Object(s.jsx)("a",{href:e,target:"_blank",rel:"noreferrer",children:e+" "},t):n[t]=e+" "})),o(n)}()}),[t]),Object(s.jsx)(s.Fragment,{children:r})};function _e(e){var t=e.socialki,a=e.comment,c=e.reblog,r=Object(o.b)(),i=Object(n.useState)(t.liked||!1),u=Object(p.a)(i,2),j=u[0],b=u[1],m=Object(n.useState)(t.reblogged||!1),x=Object(p.a)(m,2),g=x[0],y=x[1],E=Object(n.useState)(!1),S=Object(p.a)(E,2),w=S[0],N=S[1];return Object(s.jsxs)("div",{className:"socialki",children:[w&&Object(s.jsx)(v,{text:"Copied link to clipboard"}),Object(s.jsxs)("div",{className:"socialki--actions",children:[Object(s.jsx)("i",{onClick:function(){var e;b(!j),r(a?function(e){return function(){var t=Object(O.a)(f.a.mark((function t(a){var s,n,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"POST_COMMENT_LIKE_REQUEST"}),s={headers:{"content-type":"application/json"}},t.next=5,h.a.post("/api/v1/like/comment",{commentId:e},s);case 5:n=t.sent,c=n.data,a({type:re,payload:c}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),a({type:"POST_COMMENT_LIKE_FAIL",payload:t.t0.response&&t.t0.response.data.errors?t.t0.response.data.errors:[{message:t.t0.message}]});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(t.id):(e=t.id,function(){var t=Object(O.a)(f.a.mark((function t(a){var s,n,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"POST_LIKE_REQUEST"}),s={headers:{"content-type":"application/json"}},t.next=5,h.a.post("/api/v1/like",{postId:e},s);case 5:n=t.sent,c=n.data,a({type:ce,payload:c}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),a({type:"POST_LIKE_FAIL",payload:t.t0.response&&t.t0.response.data.errors?t.t0.response.data.errors:[{message:t.t0.message}]});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()))},className:"fa".concat(j?"s":"r"," fa-heart")}),!a&&Object(s.jsx)("i",{className:"far fa-comments"}),!a&&Object(s.jsx)("i",{onClick:function(){var e;y(!g),r((e=t.id,function(){var t=Object(O.a)(f.a.mark((function t(a){var s,n,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"POST_REBLOG_REQUEST"}),s={headers:{"content-type":"application/json"}},t.next=5,h.a.post("/api/v1/reblog",{postId:e},s);case 5:n=t.sent,c=n.data,a({type:"POST_REBLOG_SUCCESS",payload:c}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),a({type:"POST_REBLOG_FAIL",payload:t.t0.response&&t.t0.response.data.errors?t.t0.response.data.errors:[{message:t.t0.message}]});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()))},className:"fas fa-retweet ".concat(g&&"reblogged")}),Object(s.jsx)("i",{onClick:function(){var e=document.createElement("textarea"),s=window.location.pathname.split("/"),n=a?s[s.length-1]:t.id;e.value="http://localhost:3000/post/".concat(n),document.body.appendChild(e),e.select(),document.execCommand("copy"),N(!0),document.body.removeChild(e)},className:"fas fa-share"})]}),Object(s.jsxs)("div",{className:"socialki--main ".concat(a&&"no-pointer"),onClick:function(){a||l.push("/post/".concat(t.id))},children:[c&&Object(s.jsxs)("div",{onClick:function(e){return e.stopPropagation()},className:"socialki--reblog",children:["@",c.username," has reblogged this post"]}),Object(s.jsxs)("div",{className:"socialki--body",children:[t.image&&Object(s.jsx)("img",{className:"image",src:t.image.startsWith("http")?"".concat(t.image):"/".concat(t.image),alt:t.description}),t.description&&Object(s.jsx)("span",{onClick:function(e){return e.stopPropagation()},children:Object(s.jsx)(Ne,{text:t.description})})]}),Object(s.jsxs)("div",{onClick:function(e){return e.stopPropagation()},className:"socialki--user",children:[Object(s.jsx)(d.a,{to:t.user?"/profile/".concat(t.user.username):"/profile",children:Object(s.jsxs)("span",{children:["@",t&&t.user?t.user.username:"deleted-account"]})}),Object(s.jsx)(d.a,{to:t.user?"/profile/".concat(t.user.username):"/profile",children:Object(s.jsx)(Se,{image:t&&t.user?t.user.profileImage:"",width:"50px",height:"50px"})})]})]})]})}_e.defaultProps={socialki:{id:"1",description:"Did not load correctly",image:"",liked:!1,user:{username:"No idea",profileImage:"uploads/default.jpg"}}};var ke=_e;var Ce=function(e){var t=e.icon,a=e.text,c=e.type,r=Object(n.useState)(!0),o=Object(p.a)(r,2),i=o[0],u=o[1];return Object(s.jsxs)("div",{className:"inline-message ".concat(i&&"show"," ").concat(c&&"danger"),children:[Object(s.jsx)("span",{children:a}),t&&Object(s.jsx)("i",{className:t}),Object(s.jsx)("button",{type:"button",onClick:function(){return u(!1)},children:"X"})]})};function Te(e){var t=e.fetchAction,a=e.loading,c=e.error,r=e.posts,i=e.lastPost,u=e.user,l=e.reblogs,d=Object(o.b)(),j=Object(n.useState)(null),b=Object(p.a)(j,2),f=b[0],O=b[1],m=function(e){var t=e.root,a=void 0===t?null:t,s=e.rootMargin,c=e.threshold,r=void 0===c?0:c,o=Object(n.useState)({}),i=Object(p.a)(o,2),u=i[0],l=i[1],d=Object(n.useState)(null),j=Object(p.a)(d,2),b=j[0],f=j[1],O=Object(n.useRef)(new window.IntersectionObserver((function(e){var t=Object(p.a)(e,1)[0];return l(t)}),{root:a,rootMargin:s,threshold:r}));return Object(n.useEffect)((function(){var e=O.current;return e.disconnect(),b&&e.observe(b),function(){return e.disconnect()}}),[b]),[f,u]}({threshold:.3,rootMargin:"0px"}),h=Object(p.a)(m,2),v=h[0],g=h[1];return Object(n.useEffect)((function(){void 0!==i||c||a||d(t(void 0,u||void 0))}),[d,t,i,u,a,c]),Object(n.useEffect)((function(){if(g&&g.boundingClientRect){var e=g.boundingClientRect.y;f>e&&(a||d(t(i,u||void 0))),O(e)}}),[g,f,d,t,a,i,c,u]),Object(s.jsx)("section",{children:Object(s.jsx)("div",{className:"container",children:r&&Object(s.jsxs)(s.Fragment,{children:[r.map((function(e,t){return Object(s.jsx)(ke,{socialki:e,reblog:l&&l[t]},t)})),c&&c.map((function(e){return Object(s.jsx)(Ce,{type:"danger",text:e.message},e.message)})),Object(s.jsx)("div",{ref:v,children:Object(s.jsx)(x,{size:"5rem"})})]})})})}Te.defaultProps={fetchAction:he};var Pe=Te;var Ie=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.fetchFeed})),a=t.loading,c=t.error,r=t.posts,i=t.lastPost,u=t.reblogs,p=Object(o.c)((function(e){return e.user})),d=p.userInfo,j=p.loading;return Object(n.useEffect)((function(){j||null!==d&&d!=={}||l.push("/login")}),[d,j]),Object(n.useEffect)((function(){return function(){e({type:S})}}),[e]),Object(s.jsxs)("div",{className:"socialki-center",children:[Object(s.jsx)(we,{}),Object(s.jsx)(Pe,{fetchAction:he,loading:a,error:c,posts:r,lastPost:i,reblogs:u})]})};a(75);var Fe=function(e){var t=e.fields,a=e.submitText,c=e.onSubmit,r=e.title,o=e.loading,i=Object(n.useState)([]),u=Object(p.a)(i,2),l=u[0],d=u[1];Object(n.useEffect)((function(){if(!l){for(var e={},a=0;a<t.length;a++)e[t[a].id]="";d(e)}}),[t,l]);var j=t.map((function(e){return Object(s.jsxs)("div",{className:"form-item",children:[Object(s.jsx)("i",{className:e.icon}),Object(s.jsx)("input",{onChange:function(t){return function(e,t){var a=l;a[t.id]=e.target.value,d(a)}(t,e)},id:e.id,type:e.type,placeholder:e.name})]},e.id)}));return Object(s.jsxs)("form",{onSubmit:function(e){return c(e,l)},className:"form--container",children:[Object(s.jsx)("h2",{children:r}),j,Object(s.jsx)("button",{type:"submit",disabled:o,children:a}),o&&Object(s.jsx)(x,{size:"25px"})]})},Re=function(e){return function(){var t=Object(O.a)(f.a.mark((function t(a){var s,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:C}),t.next=4,h.a.get("/api/v1/users/".concat(e,"/profile"));case 4:s=t.sent,n=s.data,a({type:T,payload:n}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:P,payload:t.t0.response&&t.t0.response.data.errors?t.t0.response.data.errors:[{message:t.t0.message}]});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()};var Ue=function(e){var t=e.history,a=Object(o.b)(),c=Object(o.c)((function(e){return e.user})),r=c.loginError,i=c.loadingLogin,u=c.loginSuccess;return Object(n.useEffect)((function(){u&&t.push("/profile")}),[t,u]),Object(s.jsxs)("div",{children:[Object(s.jsx)(we,{}),r&&r.map((function(e){return Object(s.jsx)(v,{text:e.message,type:"danger"})})),Object(s.jsx)("div",{className:"container",children:Object(s.jsx)(Fe,{fields:[{name:"Username or Email",id:"username_email",type:"text",icon:"fas fa-user-circle"},{name:"Password",id:"password",type:"password",icon:"fas fa-key"}],loading:i,submitText:"Login",onSubmit:function(e,t){var s,n;e.preventDefault(),a((s=t.username_email,n=t.password,function(){var e=Object(O.a)(f.a.mark((function e(t){var a,c,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:I}),a={headers:{"content-type":"application/json"}},e.next=5,h.a.post("/api/v1/auth/signin",{username_email:s,password:n},a);case 5:c=e.sent,r=c.data,t({type:F,payload:r.data}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:R,payload:e.t0.response&&e.t0.response.data.errors?e.t0.response.data.errors:[{message:e.t0.message}]});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()))},title:"Login"})})]})};var Le=function(e){var t=e.history,a=Object(o.b)(),c=Object(o.c)((function(e){return e.user})),r=c.signupError,i=c.loadingSignup,u=c.signupSuccess;return Object(n.useEffect)((function(){u&&t.push("/profile")}),[t,u]),Object(s.jsxs)("div",{children:[Object(s.jsx)(we,{}),r&&r.map((function(e){return Object(s.jsx)(v,{text:e.message,type:"danger"})})),Object(s.jsx)("div",{className:"container",children:Object(s.jsx)(Fe,{fields:[{name:"Email",id:"email",type:"text",icon:"fas fa-envelope"},{name:"Username",id:"username",type:"text",icon:"fas fa-user-circle"},{name:"Password",id:"password",type:"password",icon:"fas fa-key"},{name:"Confirm Password",id:"password_confirm",type:"password",icon:"fas fa-key"}],loading:i,submitText:"Create Account",onSubmit:function(e,t){var s,n,c,r;e.preventDefault(),a((s=t.email,n=t.username,c=t.password,r=t.password_confirm,function(){var e=Object(O.a)(f.a.mark((function e(t){var a,o,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:U}),a={headers:{"content-type":"application/json"}},e.next=5,h.a.post("/api/v1/auth/signup",{username:n,email:s,password:c,passwordConfirm:r},a);case 5:o=e.sent,i=o.data,t({type:L,payload:i.data}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:A,payload:e.t0.response&&e.t0.response.data.errors?e.t0.response.data.errors:[{message:e.t0.message}]});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()))},title:"Create Account"})})]})};var Ae=function(){var e=Object(o.b)(),t=Object(n.useState)(""),a=Object(p.a)(t,2),c=a[0],r=a[1],i=Object(o.c)((function(e){return e.fetchExplore})),u=i.loading,d=i.error,j=i.posts,b=i.lastPost,f=Object(o.c)((function(e){return e.user})),O=f.userInfo,m=f.loading;Object(n.useEffect)((function(){m||null!==O&&O!=={}||l.push("/login")}),[O,m]),Object(n.useEffect)((function(){return function(){e({type:k})}}),[e]);var h=function(e){e.preventDefault(),l.push("/search/".concat(c))};return Object(s.jsxs)("div",{children:[Object(s.jsx)(we,{}),Object(s.jsxs)("section",{className:"container socialki-center",children:[Object(s.jsx)("form",{onSubmit:h,style:{width:"60%",margin:"0 auto"},children:Object(s.jsxs)("div",{className:"form-item",children:[Object(s.jsx)("i",{className:"fas fa-search",style:{cursor:"pointer"},onClick:h}),Object(s.jsx)("input",{onChange:function(e){return r(e.target.value)},id:"keyword",type:"text",placeholder:"Search..."})]},"keyword")}),Object(s.jsx)(Pe,{fetchAction:ve,loading:u,error:d,posts:j,lastPost:b})]})]})};a(76);var He=function(e){var t=e.onSuccess,a=Object(o.b)(),c=Object(n.useState)(""),r=Object(p.a)(c,2),i=r[0],u=r[1],l=Object(n.useState)(""),d=Object(p.a)(l,2),j=d[0],b=d[1],m=Object(n.useState)(""),g=Object(p.a)(m,2),y=g[0],E=g[1],S=Object(n.useState)(""),w=Object(p.a)(S,2),N=w[0],_=w[1],k=Object(n.useState)(!0),C=Object(p.a)(k,2),T=C[0],P=C[1],I=Object(n.useState)(!1),F=Object(p.a)(I,2),R=F[0],U=F[1],L=Object(n.useState)(void 0),A=Object(p.a)(L,2),H=A[0],M=A[1],D=Object(o.c)((function(e){return e.user})),Q=D.updateLoading,G=D.updateSuccess,z=D.updateError,K=D.userInfo;Object(n.useEffect)((function(){K&&(u(K.username||""),b(K.email||""),E(K.description||""),_(K.profileImage||""),P(void 0===K.isPublic||K.isPublic))}),[K]),Object(n.useEffect)((function(){G&&t()}),[G,t]);var X=function(){var e=Object(O.a)(f.a.mark((function e(t){var a,s,n,c,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files[0],(s=new FormData).append("profileImage",a),U(!0),e.prev=4,n={headers:{"content-type":"application/json"}},e.next=8,h.a.post("/api/v1/upload/profileImage",s,n);case 8:c=e.sent,r=c.data,_(r.data),U(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(4),M(e.t0.response.data.errors),U(!1);case 18:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)("form",{className:"form--container w-full",onSubmit:function(e){e.preventDefault(),a(function(e,t,a,s,n){return function(){var c=Object(O.a)(f.a.mark((function c(r){var o,i,u;return f.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,r({type:W}),o={headers:{"content-type":"application/json"}},c.next=5,h.a.put("/api/v1/auth/update-me",{username:e,email:t,profileImage:a,description:s,isPublic:n},o);case 5:i=c.sent,u=i.data,r({type:Z,payload:u.data}),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(0),r({type:J,payload:c.t0.response&&c.t0.response.data.errors?c.t0.response.data.errors:[{message:c.t0.message}]});case 13:case"end":return c.stop()}}),c,null,[[0,10]])})));return function(e){return c.apply(this,arguments)}}()}(i,j,N,y,T))},children:[H&&H.map((function(e){return Object(s.jsx)(v,{text:e.message,type:"danger"},e.message)})),z&&z.map((function(e){return Object(s.jsx)(v,{text:e.message,type:"danger"},e.message)})),Object(s.jsx)("h2",{children:"Update Profile"}),Object(s.jsxs)("div",{className:"form-item",children:[Object(s.jsx)("i",{className:"fas fa-user-circle"}),Object(s.jsx)("input",{id:"username",value:i,onChange:function(e){return u(e.target.value)},type:"text",placeholder:"Username"})]}),Object(s.jsxs)("div",{className:"form-item",children:[Object(s.jsx)("i",{className:"fas fa-envelope"}),Object(s.jsx)("input",{id:"email",value:j,onChange:function(e){return b(e.target.value)},type:"text",placeholder:"Email"})]}),Object(s.jsxs)("div",{className:"form-item",children:[Object(s.jsx)("i",{className:"fas fa-image"}),Object(s.jsx)("input",{id:"image",onChange:X,type:"file",accept:"image/*"}),R&&Object(s.jsx)(x,{size:"1rem",color:"black"})]}),Object(s.jsxs)("div",{className:"form-item",children:[Object(s.jsx)("i",{className:"fas fa-comment"}),Object(s.jsx)("textarea",{id:"description",value:y,onChange:function(e){return E(e.target.value)},rows:3,placeholder:"Description"})]}),Object(s.jsxs)("div",{className:"form-item checkbox",children:[Object(s.jsx)("i",{className:"fas fa-check",children:"Account Public"}),Object(s.jsx)("input",{onChange:function(e){return P(e.target.checked)},checked:T,type:"checkbox"})]}),Object(s.jsxs)("button",{type:"submit",children:["Save Changes",Q&&Object(s.jsx)(x,{size:"1rem",color:"white"})]})]})};a(77);var Me=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.fetchNotification})).notifications;Object(n.useEffect)((function(){e(function(){var e=Object(O.a)(f.a.mark((function e(t){var a,s,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:fe}),a={headers:{"content-type":"application/json"}},e.next=5,h.a.get("/api/v1/notifications",a);case 5:s=e.sent,n=s.data,t({type:Oe,payload:n}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:me,payload:e.t0.response&&e.t0.response.data.errors?e.t0.response.data.errors:[{message:e.t0.message}]});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}())}),[e]);var a=function(){var e=Object(O.a)(f.a.mark((function e(t,a){var s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,s={headers:{"content-type":"application/json"}},e.next=5,h.a.post("/api/v1/follow/".concat(t,"/").concat(a?"accept":"reject"),{},s);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(s.jsxs)("div",{className:"notifications",children:[Object(s.jsx)("h2",{children:"Notifications"}),Object(s.jsxs)("div",{className:"notifications--panel",children:[0===t.length&&Object(s.jsx)("span",{children:"No notifications"}),t.map((function(e,t){switch(e.type){case"LIKE_POST":return Object(s.jsxs)("div",{className:"like-post-notification",children:[Object(s.jsxs)("div",{className:"like-post-notification--post",children:[Object(s.jsx)("img",{src:e.post.image,alt:"".concat(e.user.username," post")}),Object(s.jsx)("div",{children:e.post.description})]}),Object(s.jsxs)("div",{children:["has been liked by @",e.user.username]})]},t);case"FOLLOW_NOTIFICATION":return e.follow.accepted?Object(s.jsx)("div",{className:"follow-notification",children:Object(s.jsxs)("div",{children:[Object(s.jsxs)("span",{children:["@",e.follow.follower&&e.follow.follower.username]}),"is now following you."]})},t):Object(s.jsxs)("div",{className:"follow-notification",children:[Object(s.jsxs)("div",{children:[Object(s.jsxs)("span",{children:["@",e.follow.follower.username+" "]}),"wants to follow you"]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("i",{onClick:function(){return a(e.follow.id,!0)},className:"fas fa-check-circle"}),Object(s.jsx)("i",{onClick:function(){return a(e.follow.id,!1)},className:"fas fa-times-circle danger"})]})]},t);default:return Object(s.jsx)("div",{children:"t"})}}))]})]})};var De=function(e){var t=e.className,a=e.following,c=e.userId,r=Object(n.useState)(a||void 0),o=Object(p.a)(r,2),i=o[0],u=o[1],l=function(){var e=Object(O.a)(f.a.mark((function e(){var t,a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i&&u(!1),i||u("pending"),e.prev=2,t={headers:{"content-type":"application/json"}},e.next=6,h.a.post("/api/v1/follow",{followed:c},t);case 6:a=e.sent,(s=a.data).data&&!0===s.data.accepted&&u(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();return Object(s.jsx)("div",{className:t,onClick:l,children:"pending"===i?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("i",{className:"fas fa-user-clock"}),Object(s.jsx)("span",{children:"Pending"})]}):i?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("i",{className:"fas fa-user-minus"}),Object(s.jsx)("span",{children:"Unfollow"})]}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("i",{className:"fas fa-user-plus"}),Object(s.jsx)("span",{children:"Follow"})]})})};var Qe=function(e){var t=e.match,a=Object(o.b)(),c=Object(o.c)((function(e){return e.user})),r=c.userInfo,i=c.loading,u=Object(o.c)((function(e){return e.fetchProfile})),b=u.error,f=u.loading,O=u.profile,m=Object(o.c)((function(e){return e.fetchUserPosts})),h=m.error,x=m.loading,g=m.posts,y=m.lastPost,E=Object(n.useState)(!1),S=Object(p.a)(E,2),w=S[0],N=S[1],_=Object(n.useState)(!1),k=Object(p.a)(_,2),C=k[0],T=k[1],P=Object(n.useState)(!1),I=Object(p.a)(P,2),F=I[0],R=I[1],U=Object(n.useState)(void 0),L=Object(p.a)(U,2),A=L[0],H=L[1];Object(n.useEffect)((function(){i||null!==r&&r!=={}||l.push("/login")}),[r,i]),Object(n.useEffect)((function(){return function(){a({type:$})}}),[a]),Object(n.useEffect)((function(){if(!f&&!b)if(console.log(x),t.params.user){if(O&&(O.username===t.params.user||O.id===t.params.user))return;a(Re(t.params.user)),x||(console.log("HIHI"),a(xe(void 0,t.params.user)))}else!r||!r.id||O&&r.id===O.id||(a(Re(r.id)),x||(console.log("HIHI"),a(xe(void 0,r.id))))}),[r,t.params.user,a,O,f,b,x]),Object(n.useEffect)((function(){void 0===A&&O&&O.isFollowing!==A&&H(O.isFollowing)}),[O,A]),Object(n.useEffect)((function(){t.params.user&&(!r||t.params.user!==r.id&&t.params.user!==r.username)?N(!1):N(!0)}),[r,t.params]);var M=function(){T(!1),a({type:q})};return Object(s.jsxs)("div",{children:[Object(s.jsx)(we,{}),b&&b.map((function(e){return Object(s.jsx)(v,{text:e.message,type:"danger"},e.message)})),Object(s.jsx)(j,{opened:C,onDismiss:M,content:Object(s.jsx)(He,{onSuccess:M})}),Object(s.jsx)(j,{opened:F,onDismiss:function(){return R(!1)},content:Object(s.jsx)(Me,{})}),Object(s.jsxs)("div",{className:"profile--info",children:[Object(s.jsxs)("div",{className:"profile--head",children:[Object(s.jsxs)("div",{className:"profile--left",children:[Object(s.jsx)("h2",{children:"Followers"}),Object(s.jsx)("h3",{children:O?O.followers:"?"})]}),Object(s.jsxs)("div",{className:"profile--center",children:[Object(s.jsx)(Se,{image:O?O.profileImage:"uploads/default.jpg",width:"25%"}),O&&Object(s.jsxs)("h2",{className:"profile--username",children:["@",O.username]})]}),Object(s.jsxs)("div",{className:"profile--right",children:[Object(s.jsx)("h2",{children:"Following"})," ",Object(s.jsx)("h3",{children:O?O.following:"?"})]})]}),Object(s.jsx)("div",{className:"profile--description",children:O?O.description:""}),w?Object(s.jsxs)("div",{className:"profile--actions",children:[Object(s.jsxs)(d.a,{to:"/logout",children:[Object(s.jsx)("i",{className:"fas fa-user-minus"}),"Logout"]}),Object(s.jsxs)("div",{onClick:function(){w&&R(!0)},children:[Object(s.jsx)("i",{className:"fas fa-bell"})," Notifications"]}),Object(s.jsxs)("div",{onClick:function(){w&&T(!0)},children:[Object(s.jsx)("i",{className:"fas fa-user-edit"}),"Edit Profile"]})]}):Object(s.jsxs)("div",{className:"profile--actions",children:[O&&Object(s.jsx)(De,{following:O.isFollowing,userId:O.id}),Object(s.jsxs)("div",{onClick:function(){return alert("Chat is not implemented yet")},children:[Object(s.jsx)("i",{className:"fas fa-comment"}),"Message"]})]})]}),Object(s.jsx)("section",{className:"socialki-center",children:r&&Object(s.jsx)(Pe,{fetchAction:xe,loading:void 0===x||x,posts:g,lastPost:y,user:t.params.user?t.params.user:r.id,error:h})})]})};var Ge=function(e){var t=e.match,a=Object(o.b)(),c=Object(n.useState)(""),r=Object(p.a)(c,2),i=r[0],u=r[1],d=Object(n.useState)(""),j=Object(p.a)(d,2),b=j[0],m=j[1],g=Object(n.useState)(!1),y=Object(p.a)(g,2),E=y[0],S=y[1],w=Object(n.useState)(void 0),N=Object(p.a)(w,2),_=N[0],k=N[1],C=Object(o.c)((function(e){return e.fetchPost})),T=C.error,P=C.post,I=C.comments,F=Object(o.c)((function(e){return e.user})),R=F.userInfo,U=F.loading;Object(n.useEffect)((function(){U||null!==R&&R!=={}||l.push("/login")}),[R,U]),Object(n.useEffect)((function(){var e;a({type:be}),a((e=t.params.id,function(){var t=Object(O.a)(f.a.mark((function t(a){var s,n,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:ae}),s={headers:{"content-type":"application/json"}},t.next=5,h.a.get("/api/v1/posts/".concat(e),s);case 5:n=t.sent,c=n.data,a({type:se,payload:c}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),a({type:ne,payload:t.t0.response&&t.t0.response.data.errors?t.t0.response.data.errors:[{message:t.t0.message}]});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}())),a(function(e){return function(){var t=Object(O.a)(f.a.mark((function t(a){var s,n,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:pe}),s={headers:{"content-type":"application/json"}},t.next=5,h.a.get("/api/v1/comments/".concat(e),s);case 5:n=t.sent,c=n.data,a({type:de,payload:c}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),a({type:je,payload:t.t0.response&&t.t0.response.data.errors?t.t0.response.data.errors:[{message:t.t0.message}]});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(t.params.id))}),[a,t.params.id]);var L=function(){var e=Object(O.a)(f.a.mark((function e(t){var a,s,n,c,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files[0],(s=new FormData).append("image",a),S(!0),e.prev=4,n={headers:{"content-type":"application/json"}},e.next=8,h.a.post("/api/v1/upload",s,n);case 8:c=e.sent,r=c.data,m(r.data),S(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(4),k(e.t0.response.data.errors),S(!1);case 18:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)("div",{children:[Object(s.jsx)(we,{}),_&&_.map((function(e){return Object(s.jsx)(v,{text:e.message,type:"danger"})})),T&&T.map((function(e){return Object(s.jsx)(v,{text:e.message,type:"danger"})})),P&&Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)(ke,{socialki:P}),Object(s.jsxs)("div",{className:"socialki--comments",children:[Object(s.jsxs)("form",{onSubmit:function(e){var t,s;(e.preventDefault(),P)&&(a((t=P.id,s={description:i,image:b},function(){var e=Object(O.a)(f.a.mark((function e(a){var n,c,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"POST_COMMENT_REQUEST"}),n={headers:{"content-type":"application/json"}},e.next=5,h.a.post("/api/v1/comments/".concat(t),s,n);case 5:c=e.sent,r=c.data,a({type:"POST_COMMENT_SUCCESS",payload:r}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a({type:"POST_COMMENT_FAIL",payload:e.t0.response&&e.t0.response.data.errors?e.t0.response.data.errors:[{message:e.t0.message}]});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}())),u(""),m(""))},className:"socialki--comments-form",children:[Object(s.jsxs)("div",{className:"form-item",children:[Object(s.jsx)("i",{className:"fas fa-comment"}),Object(s.jsx)("textarea",{onChange:function(e){return u(e.target.value)},value:i,rows:3,placeholder:"Comment",type:"text"})]}),Object(s.jsxs)("div",{className:"socialki--comments-form--actions",children:[Object(s.jsxs)("div",{className:"socialki--comments-form--image",children:[Object(s.jsx)("label",{htmlFor:"commentImage",children:Object(s.jsx)("i",{className:"fas fa-image"})}),Object(s.jsx)("input",{type:"file",accept:"image/*",id:"commentImage",onChange:L})]}),Object(s.jsxs)("button",{type:"submit",children:["Post",E&&Object(s.jsx)(x,{size:"20px"})]})]})]}),I&&Object(s.jsx)("div",{children:I.map((function(e){return Object(s.jsx)(ke,{socialki:e,comment:!0})}))})]})]})]})};var ze=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.user})).logoutSuccess;return Object(n.useEffect)((function(){e(function(){var e=Object(O.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:H}),a={headers:{"content-type":"application/json"}},e.next=5,h.a.post("/api/v1/auth/signout",{},a);case 5:t({type:M}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:D,payload:e.t0.response&&e.t0.response.data.errors?e.t0.response.data.errors:[{message:e.t0.message}]});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(n.useEffect)((function(){console.log("test",t),t&&l.push("/login")}),[t]),Object(s.jsx)("div",{children:Object(s.jsx)(x,{})})};a(78);var Ke=function(e){var t=e.user;return Object(s.jsxs)("div",{className:"account-card",children:[Object(s.jsx)("div",{onClick:function(e){return l.push("/profile/".concat(t.username))},className:"account-card--left pointer",children:Object(s.jsx)(Se,{image:t.profileImage,width:"100%"})}),Object(s.jsxs)("div",{className:"account-card--center",children:[Object(s.jsxs)("h2",{onClick:function(e){return l.push("/profile/".concat(t.username))},className:"pointer inline",children:["@",t.username]}),Object(s.jsx)("p",{children:t.description})]}),Object(s.jsx)(De,{className:"account-card--right",userId:t.id,following:t.following})]})};var Xe=function(e){var t=e.match,a=e.location,c=Object(o.b)(),r=Object(n.useState)(""),i=Object(p.a)(r,2),u=i[0],d=i[1],j=Object(o.c)((function(e){return e.fetchSearch})),b=j.loading,f=j.error,O=j.posts,m=j.users,h=j.lastPost,v=Object(o.c)((function(e){return e.user})),x=v.userInfo,g=v.loading;Object(n.useEffect)((function(){g||null!==x&&x!=={}||l.push("/login")}),[x,g]),Object(n.useEffect)((function(){return console.log("test"),c(ge(t.params.keyword||a.hash,void 0,!0,!0)),function(){c({type:le})}}),[c,t.params.keyword,a.hash]);var y=function(e){e.preventDefault(),l.push("/search/".concat(u))};return Object(s.jsxs)("div",{children:[Object(s.jsx)(we,{}),Object(s.jsxs)("section",{className:"container socialki-center",children:[Object(s.jsx)("form",{onSubmit:y,style:{width:"60%",margin:"0 auto"},children:Object(s.jsxs)("div",{className:"form-item",children:[Object(s.jsx)("i",{className:"fas fa-search",style:{cursor:"pointer"},onClick:y}),Object(s.jsx)("input",{onChange:function(e){return d(e.target.value)},id:"keyword",type:"text",placeholder:"Search..."})]},"keyword")}),m&&m.length>0&&Object(s.jsx)("div",{children:m.map((function(e){return Object(s.jsx)(Ke,{user:e},e.id)}))}),Object(s.jsx)(Pe,{fetchAction:function(){return ge(t.params.keyword||a.hash,h,!1,O.length>0)},loading:b,error:f,posts:O,lastPost:h})]})]})};var Be=function(){var e=Object(o.b)();return Object(n.useEffect)((function(){e(function(){var e=Object(O.a)(f.a.mark((function e(t){var a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Q}),e.next=4,h.a.get("/api/v1/auth/me");case 4:a=e.sent,s=a.data,t({type:G,payload:s.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:z,payload:e.t0.response&&e.t0.response.data.errors?e.t0.response.data.errors:[{message:e.t0.message}]});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(s.jsxs)(i.b,{history:l,children:[Object(s.jsx)(i.a,{exact:!0,path:"/login",component:Ue}),Object(s.jsx)(i.a,{exact:!0,path:"/logout",component:ze}),Object(s.jsx)(i.a,{exact:!0,path:"/signup",component:Le}),Object(s.jsx)(i.a,{exact:!0,path:"/explore",component:Ae}),Object(s.jsx)(i.a,{exact:!0,path:"/search/:keyword",component:Xe}),Object(s.jsx)(i.a,{exact:!0,path:"/search",component:Xe}),Object(s.jsx)(i.a,{exact:!0,path:"/profile",component:Qe}),Object(s.jsx)(i.a,{exact:!0,path:"/profile/:user",component:Qe}),Object(s.jsx)(i.a,{exact:!0,path:"/post/:id",component:Ge}),Object(s.jsx)(i.a,{exact:!0,path:"/",component:Ie})]})},$e=a(17),We=a(39),Ze=a(40),Je=a(8),qe=a(2),Ve=Object($e.combineReducers)({fetchNotification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{notifications:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case fe:return{loading:!0,notifications:e.notifications?Object(Je.a)(e.notifications):[]};case Oe:return{loading:!1,notifications:t.payload.data,lastPost:t.payload.lastPost};case me:return{loading:!1,error:t.payload,notifications:e.notifications?Object(Je.a)(e.notifications):[]};default:return e}},fetchPost:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:return Object(qe.a)(Object(qe.a)({},e),{},{loading:!0});case se:return Object(qe.a)(Object(qe.a)({},e),{},{loading:!1,post:t.payload.data});case ce:var a=Object(qe.a)({},e.post);return a.id===t.payload.data.post.id&&(a.liked=!!t.payload),Object(qe.a)(Object(qe.a)({},e),{},{loading:!1,post:a});case ne:return Object(qe.a)(Object(qe.a)({},e),{},{loading:!1,error:t.payload});case pe:return Object(qe.a)(Object(qe.a)({},e),{},{commentLoading:!0});case de:return Object(qe.a)(Object(qe.a)({},e),{},{comments:t.payload.data,commentLoading:!1});case je:return Object(qe.a)(Object(qe.a)({},e),{},{commentError:t.payload,commentLoading:!1});case re:return e.comments.forEach((function(e){e.id===t.payload.data.comment.id&&(e.liked=!e.liked)})),Object(qe.a)({},e);case be:return Object(qe.a)(Object(qe.a)({},e),{},{comments:[]});case M:return Object(qe.a)(Object(qe.a)({},e),{},{post:void 0});default:return e}},fetchFeed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{posts:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(qe.a)(Object(qe.a)({},e),{},{loading:!0,posts:e.posts?Object(Je.a)(e.posts):[]});case y:return{loading:!1,posts:e.posts?[].concat(Object(Je.a)(e.posts),Object(Je.a)(t.payload.data)):t.payload.data,reblogs:e.reblogs?[].concat(Object(Je.a)(e.reblogs),Object(Je.a)(t.payload.reblogs)):t.payload.reblogs,lastPost:t.payload.lastPost};case ce:var a=Object(Je.a)(e.posts);return a.forEach((function(e){t.payload.data.post.id===e.id&&(e.liked=!0)})),Object(qe.a)(Object(qe.a)({},e),{},{loading:!1,posts:a});case E:return Object(qe.a)(Object(qe.a)({},e),{},{loading:!1,error:t.payload,posts:e.posts?Object(Je.a)(e.posts):[]});case S:return Object(qe.a)(Object(qe.a)({},e),{},{error:void 0});case M:return Object(qe.a)(Object(qe.a)({},e),{},{posts:[]});default:return e}},fetchExplore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{posts:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(qe.a)(Object(qe.a)({},e),{},{loading:!0,posts:e.posts?Object(Je.a)(e.posts):[]});case N:return{loading:!1,posts:e.posts?[].concat(Object(Je.a)(e.posts),Object(Je.a)(t.payload.data)):t.payload.data,lastPost:t.payload.lastPost};case ce:var a=Object(Je.a)(e.posts);return a.forEach((function(e){t.payload.data.post.id===e.id&&(e.liked=!0)})),Object(qe.a)(Object(qe.a)({},e),{},{loading:!1,posts:a});case _:return Object(qe.a)(Object(qe.a)({},e),{},{loading:!1,error:t.payload,posts:e.posts?Object(Je.a)(e.posts):[]});case k:return Object(qe.a)(Object(qe.a)({},e),{},{error:void 0});case M:return Object(qe.a)(Object(qe.a)({},e),{},{posts:[]});default:return e}},fetchProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{posts:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return{loading:!0,posts:[]};case T:return{loading:!1,profile:t.payload.data};case P:return{loading:!1,error:t.payload};default:return e}},fetchUserPosts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{posts:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K:return Object(qe.a)(Object(qe.a)({},e),{},{loading:!0,posts:e.posts?Object(Je.a)(e.posts):[]});case X:return{loading:!1,posts:e.posts?[].concat(Object(Je.a)(e.posts),Object(Je.a)(t.payload.data)):t.payload.data,lastPost:t.payload.lastPost};case ce:var a=Object(Je.a)(e.posts);return a.forEach((function(e){t.payload.data.post.id===e.id&&(e.liked=!0)})),Object(qe.a)(Object(qe.a)({},e),{},{loading:!1,posts:a});case B:return Object(qe.a)(Object(qe.a)({},e),{},{loading:!1,error:t.payload,posts:e.posts?Object(Je.a)(e.posts):[]});case $:return Object(qe.a)(Object(qe.a)({},e),{},{error:void 0});case M:case C:return Object(qe.a)(Object(qe.a)({},e),{},{posts:[]});default:return e}},fetchSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{posts:[],users:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:return Object(qe.a)(Object(qe.a)({},e),{},{loading:!0,posts:e.posts?Object(Je.a)(e.posts):[],users:e.users?Object(Je.a)(e.users):[]});case ie:return{loading:!1,posts:e.posts?[].concat(Object(Je.a)(e.posts),Object(Je.a)(t.payload.data.posts)):t.payload.data,users:e.users?[].concat(Object(Je.a)(e.users),Object(Je.a)(t.payload.data.users)):t.payload.data.users,lastPost:t.payload.lastPost};case ue:return Object(qe.a)(Object(qe.a)({},e),{},{loading:!1,error:t.payload,posts:e.posts?Object(Je.a)(e.posts):[],users:e.users?Object(Je.a)(e.users):[]});case le:return Object(qe.a)(Object(qe.a)({},e),{},{error:void 0,posts:[],users:[]});case ce:var a=Object(Je.a)(e.posts);return a.forEach((function(e){t.payload.data.post.id===e.id&&(e.liked=!0)})),Object(qe.a)(Object(qe.a)({},e),{},{loading:!1,posts:a});case M:return Object(qe.a)(Object(qe.a)({},e),{},{posts:[]});default:return e}},postCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return Object(qe.a)(Object(qe.a)({},e),{},{loading:!0});case Y:return{loading:!1,posts:t.payload.data,success:!0};case ee:return Object(qe.a)(Object(qe.a)({},e),{},{loading:!1,error:t.payload});case te:return{};default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{userInfo:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return{loadingLogin:!0};case F:return{loadingLogin:!1,userInfo:t.payload,loginSuccess:!0};case R:return{loadingLogin:!1,loginError:t.payload};case U:return{loadingSignup:!0};case L:return{loadingSignup:!1,userInfo:t.payload,signupSuccess:!0};case A:return{loadingSignup:!1,signupError:t.payload};case Q:return{loading:!0};case G:return{loading:!1,userInfo:t.payload};case z:return{loading:!1,error:t.payload};case W:return{updateLoading:!0};case Z:return{updateLoading:!1,userInfo:t.payload,updateSuccess:!0};case J:return{updateLoading:!1,updateError:t.payload};case q:return Object(qe.a)(Object(qe.a)({},e),{},{updateSuccess:!1});case H:return{loading:!0};case M:return{loading:!1,userInfo:void 0,logoutSuccess:!0};case D:return{loading:!1};default:return e}}}),Ye=[We.a],et=Object($e.createStore)(Ve,{},Object(Ze.composeWithDevTools)($e.applyMiddleware.apply(void 0,Ye)));r.a.render(Object(s.jsx)(o.a,{store:et,children:Object(s.jsx)(Be,{})}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.26ec59db.chunk.js.map